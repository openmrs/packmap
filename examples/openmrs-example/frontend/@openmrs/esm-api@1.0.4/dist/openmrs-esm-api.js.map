{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/fhir.js/src/utils.js","webpack:///./node_modules/fhir.js/src/middlewares/core.js","webpack:///external \"react\"","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/fhir.js/src/fhir.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/merge/merge.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/fhir.js/src/middlewares/search.js","webpack:///./node_modules/fhir.js/src/middlewares/auth.js","webpack:///./node_modules/Base64/base64.js","webpack:///./node_modules/fhir.js/src/middlewares/http.js","webpack:///./node_modules/fhir.js/src/middlewares/errors.js","webpack:///./node_modules/fhir.js/src/middlewares/config.js","webpack:///./node_modules/fhir.js/src/middlewares/bundle.js","webpack:///./node_modules/fhir.js/src/middlewares/patient.js","webpack:///./node_modules/fhir.js/src/middlewares/references.js","webpack:///./node_modules/fhir.js/src/middlewares/url.js","webpack:///./node_modules/fhir.js/src/decorate.js","webpack:///./node_modules/systemjs-webpack-interop/src/public-path-system-resolve.js","webpack:///./src/set-public-path.ts","webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/_overArg.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/isPlainObject.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./src/openmrs-fetch.ts","webpack:///./src/fhir.ts","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///./node_modules/rxjs/_esm5/internal/BehaviorSubject.js","webpack:///./node_modules/rxjs/_esm5/internal/InnerSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/iterator.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArrayLike.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeTo.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/OuterSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeMap.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/from.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","webpack:///./node_modules/rxjs/_esm5/internal/util/identity.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./src/shared-api-objects/current-user.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeAll.js","webpack:///./src/shared-api-objects/user-has-access-react.component.tsx","webpack:///./src/openmrs-backend-dependencies.ts","webpack:///./src/openmrs-esm-api.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","merge","RTRIM","trim","text","toString","replace","type","obj","undefined","String","assertArray","a","assertObject","reduceMap","fn","acc","k","v","results","push","reduce","identity","x","argsArray","Array","slice","arguments","mergeLists","merged","nextMap","ret","concat","apply","absoluteUrl","baseUrl","ref","match","relativeUrl","length","resourceIdToUrl","id","indexOf","walk","inner","outer","data","context","keysToMap","map","item","arg","postwalk","f","this","utils","Middleware","mw","and","nmw","mw1","mw2","h","end","$$Simple","args","$$Attr","attr","path","split","setAttr","Attribute","Method","method","__WEBPACK_EXTERNAL_MODULE__2__","freeGlobal","global","M","query","auth","transport","errors","config","bundle","pt","refs","url","decorate","cfg","adapter","$$Method","$$Header","$Errors","Defaults","$Basic","$Bearer","$Credentials","$JsonData","headers","GET","POST","PUT","DELETE","http","Http","BaseUrl","Path","resourceTypePath","slash","resourceTypeHxPath","resourcePath","resourceHxPath","vreadPath","ReturnHeader","$Paging","conformance","document","profile","transaction","history","typeHistory","resourceHistory","read","$WithPatient","vread","validate","search","$SearchParams","update","nextPage","$$BundleLinkUrl","prevPage","resolve","g","Function","e","window","isNode","Public","clone","merge_recursive","base","extend","typeOf","recursive","argv","result","size","index","sitem","input","toLowerCase","output","webpackPolyfill","deprecate","paths","children","OPERATORS","$gt","$lt","$lte","$gte","MODIFIERS","$asc","$desc","$exact","$missing","$null","$text","linearizeOne","xs","len","param","modifier","handleSort","kk","res","vv","vvv","isOperator","operator","$or","$type","expandParam","join","linearizeParams","buildSearchParams","encodeURIComponent","filter","_query","params","since","_since","count","_count","credentials","btoa","user","pass","bearer","chars","InvalidCharacterError","message","Error","block","charCode","str","idx","charAt","charCodeAt","atob","bs","buffer","bc","fromCharCode","debug","console","log","promise","then","resource","JSON","stringify","stack","defer","deff","reject","copyAttr","from","to","rel","link","relation","targets","patient","CONTAINED","sync","cache","reference","cid","contained","_id","content","resolveContained","abs","entry","cacheMatched","def","core","tkn","chain","new_chain","pth","exp","exps","substring","evalPropsExpr","evalExpr","buildPathPart","ch","fhirAPI","drain","searchParams","process","done","fail","getNext","entries","err","fetchAll","forEach","fetchAllWithReferences","resolveParams","resolvedReferences","queue","enqueue","referenceID","referencedObject","next","resolveReference","pop","element","resourceType","resolveParam","targetType","targetElement","client","newAdapter","systemjsModuleName","rootDirectoryLevel","Number","isInteger","moduleUrl","System","urlString","URL","pathname","numDirsProcessed","fullUrl","href","resolveDirectory","setPublicPath","freeSelf","self","objectProto","nativeObjectToString","symToStringTag","isOwn","tag","unmasked","nullTag","undefinedTag","func","transform","getPrototypeOf","objectTag","funcProto","funcToString","objectCtorString","proto","Ctor","constructor","extendStatics","b","setPrototypeOf","__proto__","__extends","__","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","Promise","hostReportError","setTimeout","empty","closed","error","useDeprecatedSynchronousErrorHandling","complete","isArray","isObject","UnsubscriptionError","UnsubscriptionErrorImpl","Subscription","unsubscribe","_parentOrParents","_subscriptions","_unsubscribe","remove","flattenUnsubscriptionErrors","sub","add","teardown","subscription","EMPTY","tmp","subscriptions","subscriptionIndex","splice","errs","rxSubscriber","Math","random","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","observable","noop","pipeFromArray","fns","prev","Observable","subscribe","_isScalar","_subscribe","lift","source","sink","nextOrObserver","toSubscriber","_trySubscribe","observer","_a","closed_1","canReportError","warn","promiseCtor","getPromiseCtor","pipe","operations","_i","toPromise","openmrsFetch","fetchInit","openmrsBase","isPlainObject","body","Accept","requestStacktrace","fetch","response","ok","status","json","responseText","responseBody","parse","OpenmrsFetchError","openmrsObservableFetch","abortController","AbortController","signal","hasResponse","abort","super","statusText","openmrsFhirAdapter","requestObj","fhir","makeFhir","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","copy","asObservable","AnonymousSubject","BehaviorSubject","_value","getValue","configurable","InnerSubscriber","outerValue","outerIndex","notifyNext","notifyError","notifyComplete","getSymbolIterator","iterator","isArrayLike","isPromise","subscribeTo","obs","TypeError","array","iterable","return","OuterSubscriber","innerValue","innerIndex","innerSub","project","thisArg","MapOperator","MapSubscriber","scheduled","scheduler","isInteropObservable","schedule","scheduleObservable","schedulePromise","scheduleArray","isIterable","scheduleIterable","mergeMap","resultSelector","concurrent","POSITIVE_INFINITY","ii","MergeMapOperator","MergeMapSubscriber","hasCompleted","active","_tryNext","_innerSub","ish","innerSubscriber","outerSubscriber","subscribeToResult","shift","FilterOperator","predicate","FilterSubscriber","userSubject","getCurrentUser","opts","includeAuthStatus","Boolean","refetchCurrentUser","userHasAccess","requiredPrivilege","privileges","find","display","UserHasAccessReact","props","setUser","React","useState","useEffect","privilege","omrsBackendDependencies"],"mappings":"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","file":"openmrs-esm-api.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","(function() {\n  var merge = require('merge');\n\n  var RTRIM = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\n  var trim = function(text) {\n    return text ? text.toString().replace(RTRIM, \"\")  : \"\";\n  };\n\n  exports.trim = trim;\n\n  var addKey = function(acc, str) {\n    var pair, val;\n    if (!str) {\n      return null;\n    }\n    pair = str.split(\"=\").map(trim);\n    val = pair[1].replace(/(^\"|\"$)/g, '');\n    if (val) {\n      acc[pair[0]] = val;\n    }\n    return acc;\n  };\n\n  var type = function(obj) {\n    var classToType;\n    if (obj == null && obj === undefined) {\n      return String(obj);\n    }\n    classToType = {\n      '[object Boolean]': 'boolean',\n      '[object Number]': 'number',\n      '[object String]': 'string',\n      '[object Function]': 'function',\n      '[object Array]': 'array',\n      '[object Date]': 'date',\n      '[object RegExp]': 'regexp',\n      '[object Object]': 'object'\n    };\n    return classToType[Object.prototype.toString.call(obj)];\n  };\n\n  exports.type = type;\n\n  var assertArray = function(a) {\n    if (type(a) !== 'array') {\n      throw 'not array';\n    }\n    return a;\n  };\n\n  exports.assertArray = assertArray;\n\n  var assertObject = function(a) {\n    if (type(a) !== 'object') {\n      throw 'not object';\n    }\n    return a;\n  };\n\n  exports.assertObject = assertObject;\n\n  var reduceMap = function(m, fn, acc) {\n    var k, v;\n    acc || (acc = []);\n    assertObject(m);\n    return ((function() {\n      var results;\n      results = [];\n      for (k in m) {\n        v = m[k];\n        results.push([k, v]);\n      }\n      return results;\n    })()).reduce(fn, acc);\n  };\n\n  exports.reduceMap = reduceMap;\n\n  var identity = function(x) {return x;};\n\n  exports.identity = identity;\n\n  var argsArray = function() {\n     return Array.prototype.slice.call(arguments)\n  };\n\n  exports.argsArray = argsArray;\n\n  var mergeLists = function() {\n    var reduce;\n    reduce = function(merged, nextMap) {\n      var k, ret, v;\n      ret = merge(true, merged);\n      for (k in nextMap) {\n        v = nextMap[k];\n        ret[k] = (ret[k] || []).concat(v);\n      }\n      return ret;\n    };\n    return argsArray.apply(null, arguments).reduce(reduce, {});\n  };\n\n  exports.mergeLists = mergeLists;\n\n  var absoluteUrl = function(baseUrl, ref) {\n    if (!ref.match(/https?:\\/\\/./)) {\n      return baseUrl + \"/\" + ref;\n    } else {\n      return ref;\n    }\n  };\n\n  exports.absoluteUrl = absoluteUrl;\n\n  var relativeUrl = function(baseUrl, ref) {\n    if (ref.slice(ref, baseUrl.length + 1) === baseUrl + \"/\") {\n      return ref.slice(baseUrl.length + 1);\n    } else {\n      return ref;\n    }\n  };\n\n  exports.relativeUrl = relativeUrl;\n\n  exports.resourceIdToUrl = function(id, baseUrl, type) {\n    baseUrl = baseUrl.replace(/\\/$/, '');\n    id = id.replace(/^\\//, '');\n    if (id.indexOf('/') < 0) {\n      return baseUrl + \"/\" + type + \"/\" + id;\n    } else if (id.indexOf(baseUrl) !== 0) {\n      return baseUrl + \"/\" + id;\n    } else {\n      return id;\n    }\n  };\n\n  var walk = function(inner, outer, data, context) {\n    var keysToMap, remapped;\n    switch (type(data)) {\n      case 'array':\n        return outer(data.map(function(item) {\n          return inner(item, [data, context]);\n        }), context);\n      case 'object':\n        keysToMap = function(acc, arg) {\n          var k, v;\n          k = arg[0], v = arg[1];\n          acc[k] = inner(v, [data].concat(context));\n          return acc;\n        };\n        remapped = reduceMap(data, keysToMap, {});\n        return outer(remapped, context);\n      default:\n        return outer(data, context);\n    }\n  };\n\n  exports.walk = walk;\n\n  var postwalk = function(f, data, context) {\n    if (!data) {\n      return function(data, context) {\n        return postwalk(f, data, context);\n      };\n    } else {\n      return walk(postwalk(f), f, data, context);\n    }\n  };\n\n  exports.postwalk = postwalk;\n\n}).call(this);\n","(function() {\n    var utils = require(\"../utils\");\n\n    var id = function(x){return x;};\n    var constantly = function(x){return function(){return x;};};\n\n    var mwComposition = function(mw1, mw2){\n        return function(h){ return mw1(mw2(h)); };\n    };\n\n    var Middleware = function(mw){\n        mw.and = function(nmw){\n            return Middleware(mwComposition(mw, nmw));\n        };\n        mw.end = function(h){\n            return mw(h);\n        };\n        return mw;\n    };\n\n    // generate wm from function\n    exports.$$Simple = function(f){\n        return function(h){\n            return function(args){\n                return h(f(args));\n            };\n        };\n    };\n\n    var setAttr = function(args, attr, value){\n        var path = attr.split('.');\n        var obj = args;\n        for(var i = 0; i < (path.length - 1); i++){\n            var k = path[i];\n            obj = args[k];\n            if(!obj){\n                obj = {};\n                args[k] = obj;\n            }\n        }\n        obj[path[path.length - 1]] = value;\n        return args;\n    };\n\n    // generate wm from function\n    exports.$$Attr = function(attr, fn){\n        return Middleware(function(h){\n            return function(args) {\n                var value = null;\n                if(utils.type(fn) == 'function'){\n                   value = fn(args);\n                } else {\n                    value = fn;\n                }\n                if(value == null && value == undefined){\n                    return h(args);\n                }else {\n                    return h(setAttr(args, attr, value));\n                }\n            };\n        });\n    };\n\n    var Attribute = function(attr, fn){\n        return Middleware(function(h){\n            return function(args) {\n                args[attr] = fn(args);\n                return h(args);\n            };\n        });\n    };\n\n    var Method = function(method){\n        return Attribute('method', constantly(method));\n    };\n\n    exports.Middleware = Middleware;\n    exports.Attribute = Attribute;\n    exports.Method = Method;\n\n}).call(this);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","(function() {\n    var utils = require(\"./utils\");\n    var M = require('./middlewares/core');\n    var query = require('./middlewares/search');\n    var auth = require('./middlewares/auth');\n    var transport = require('./middlewares/http');\n    var errors = require('./middlewares/errors');\n    var config = require('./middlewares/config');\n    var bundle = require('./middlewares/bundle');\n    var pt = require('./middlewares/patient');\n    var refs = require('./middlewares/references');\n    var url = require('./middlewares/url');\n    var decorate = require('./decorate');\n\n    var cache = {};\n\n\n    var fhir = function(cfg, adapter){\n        var Middleware = M.Middleware;\n        var $$Attr = M.$$Attr;\n\n        var $$Method = function(m){ return $$Attr('method', m);};\n        var $$Header = function(h,v) {return $$Attr('headers.' + h, v);};\n\n        var $Errors = Middleware(errors);\n        var Defaults = Middleware(config(cfg, adapter))\n                .and($Errors)\n                .and(auth.$Basic)\n                .and(auth.$Bearer)\n                .and(auth.$Credentials)\n                .and(transport.$JsonData)\n                .and($$Header('Accept', (cfg.headers && cfg.headers['Accept']) ? cfg.headers['Accept'] : 'application/json'))\n                .and($$Header('Content-Type', (cfg.headers && cfg.headers['Content-Type']) ? cfg.headers['Content-Type'] : 'application/json'));\n\n        var GET = Defaults.and($$Method('GET'));\n        var POST = Defaults.and($$Method('POST'));\n        var PUT = Defaults.and($$Method('PUT'));\n        var DELETE = Defaults.and($$Method('DELETE'));\n\n        var http = transport.Http(cfg, adapter);\n\n        var Path = url.Path;\n        var BaseUrl = Path(cfg.baseUrl);\n        var resourceTypePath = BaseUrl.slash(\":type || :resource.resourceType\");\n        var searchPath = resourceTypePath;\n        var resourceTypeHxPath = resourceTypePath.slash(\"_history\");\n        var resourcePath = resourceTypePath.slash(\":id || :resource.id\");\n        var resourceHxPath = resourcePath.slash(\"_history\");\n        var vreadPath =  resourceHxPath.slash(\":versionId || :resource.meta.versionId\");\n        var resourceVersionPath = resourceHxPath.slash(\":versionId || :resource.meta.versionId\");\n\n        var ReturnHeader = $$Header('Prefer', 'return=representation');\n\n        var $Paging = Middleware(query.$Paging);\n\n        return decorate({\n            conformance: GET.and(BaseUrl.slash(\"metadata\")).end(http),\n            document: POST.and(BaseUrl.slash(\"Document\")).end(http),\n            profile:  GET.and(BaseUrl.slash(\"Profile\").slash(\":type\")).end(http),\n            transaction: POST.and(BaseUrl).end(http),\n            history: GET.and(BaseUrl.slash(\"_history\")).and($Paging).end(http),\n            typeHistory: GET.and(resourceTypeHxPath).and($Paging).end(http),\n            resourceHistory: GET.and(resourceHxPath).and($Paging).end(http),\n            read: GET.and(pt.$WithPatient).and(resourcePath).end(http),\n            vread: GET.and(vreadPath).end(http),\n            \"delete\": DELETE.and(resourcePath).and(ReturnHeader).end(http),\n            create: POST.and(resourceTypePath).and(ReturnHeader).end(http),\n            validate: POST.and(resourceTypePath.slash(\"_validate\")).end(http),\n            search: GET.and(resourceTypePath).and(pt.$WithPatient).and(query.$SearchParams).and($Paging).end(http),\n            update: PUT.and(resourcePath).and(ReturnHeader).end(http),\n            nextPage: GET.and(bundle.$$BundleLinkUrl(\"next\")).end(http),\n            prevPage: GET.and(bundle.$$BundleLinkUrl(\"prev\")).end(http),\n            resolve: GET.and(refs.resolve).end(http)\n        }, adapter);\n\n    };\n    module.exports = fhir;\n}).call(this);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","(function() {\n    var utils = require('../utils');\n\n    var type = utils.type;\n\n    var assertArray = utils.assertArray;\n\n    var assertObject = utils.assertObject;\n\n    var reduceMap = utils.reduceMap;\n\n    var identity = utils.identity;\n\n    var OPERATORS = {\n        $gt: 'gt',\n        $lt: 'lt',\n        $lte: 'lte',\n        $gte: 'gte'\n    };\n\n    var MODIFIERS = {\n        $asc: ':asc',\n        $desc: ':desc',\n        $exact: ':exact',\n        $missing: ':missing',\n        $null: ':missing',\n        $text: ':text'\n    };\n\n    var isOperator = function(v) {\n        return v.indexOf('$') === 0;\n    };\n\n    var expandParam = function(k, v) {\n        return reduceMap(v, function(acc, arg) {\n            var kk, o, res, vv;\n            kk = arg[0], vv = arg[1];\n            return acc.concat(kk === '$and' ? assertArray(vv).reduce((function(a, vvv) {\n                return a.concat(linearizeOne(k, vvv));\n            }), []) : kk === '$type' ? [] : isOperator(kk) ? (o = {\n                param: k\n            }, kk === '$or' ? o.value = vv : (OPERATORS[kk] ? o.operator = OPERATORS[kk] : void 0, MODIFIERS[kk] ? o.modifier = MODIFIERS[kk] : void 0, type(vv) === 'object' && vv.$or ? o.value = vv.$or : o.value = [vv]), [o]) : (v.$type ? res = \":\" + v.$type : void 0, linearizeOne(\"\" + k + (res || '') + \".\" + kk, vv)));\n        });\n    };\n\n    var handleSort = function(xs) {\n        var i, len, results, x;\n        assertArray(xs);\n        results = [];\n        for (i = 0, len = xs.length; i < len; i++) {\n            x = xs[i];\n            switch (type(x)) {\n            case 'array':\n                results.push({\n                    param: '_sort',\n                    value: x[0],\n                    modifier: \":\" + x[1]\n                });\n                break;\n            case 'string':\n                results.push({\n                    param: '_sort',\n                    value: x\n                });\n                break;\n            default:\n                results.push(void 0);\n            }\n        }\n        return results;\n    };\n\n    var handleInclude = function(includes) {\n        return reduceMap(includes, function(acc, arg) {\n            var k, v;\n            k = arg[0], v = arg[1];\n            return acc.concat((function() {\n                switch (type(v)) {\n                case 'array':\n                    return v.map(function(x) {\n                        return {\n                            param: '_include',\n                            value: k + \".\" + x\n                        };\n                    });\n                case 'string':\n                    return [\n                        {\n                            param: '_include',\n                            value: k + \".\" + v\n                        }\n                    ];\n                }\n            })());\n        });\n    };\n\n    var linearizeOne = function(k, v) {\n        if (k === '$sort') {\n            return handleSort(v);\n        } else if (k === '$include') {\n            return handleInclude(v);\n        } else {\n            switch (type(v)) {\n            case 'object':\n                return expandParam(k, v);\n            case 'string':\n                return [\n                    {\n                        param: k,\n                        value: [v]\n                    }\n                ];\n            case 'number':\n                return [\n                    {\n                        param: k,\n                        value: [v]\n                    }\n                ];\n            case 'array':\n                return [\n                    {\n                        param: k,\n                        value: [v.join(\"|\")]\n                    }\n                ];\n            default:\n                throw \"could not linearizeParams \" + (type(v));\n            }\n        }\n    };\n\n    var linearizeParams = function(query) {\n        return reduceMap(query, function(acc, arg) {\n            var k, v;\n            k = arg[0], v = arg[1];\n            return acc.concat(linearizeOne(k, v));\n        });\n    };\n\n    var buildSearchParams = function(query) {\n        var p, ps;\n        ps = (function() {\n            var i, len, ref, results;\n            ref = linearizeParams(query);\n            results = [];\n            for (i = 0, len = ref.length; i < len; i++) {\n                p = ref[i];\n                results.push([p.param, p.modifier, '=', p.operator, encodeURIComponent(p.value)].filter(identity).join(''));\n            }\n            return results;\n        })();\n        return ps.join(\"&\");\n    };\n\n    exports._query = linearizeParams;\n\n    exports.query = buildSearchParams;\n\n    var mw = require('./core');\n\n    exports.$SearchParams = mw.$$Attr('url', function(args){\n        var url = args.url;\n        if(args.query){\n             var queryStr = buildSearchParams(args.query);\n             return url + \"?\" + queryStr;\n        }\n        return url;\n    });\n\n\n    exports.$Paging = function(h){\n        return function(args){\n            var params = args.params || {};\n            if(args.since){params._since = args.since;}\n            if(args.count){params._count = args.count;}\n            args.params = params;\n            return h(args);\n        };\n    };\n\n\n}).call(this);\n","(function() {\n    var mw = require('./core');\n\n    var btoa = require('Base64').btoa;\n\n    exports.$Basic = mw.$$Attr('headers.Authorization', function(args){\n        if(args.auth && args.auth.user && args.auth.pass){\n            return \"Basic \" + btoa(args.auth.user + \":\" + args.auth.pass);\n        }\n    });\n\n    exports.$Bearer = mw.$$Attr('headers.Authorization', function(args){\n        if(args.auth && args.auth.bearer){\n            return \"Bearer \" + args.auth.bearer;\n        }\n    });\n\n    var credentials;\n    // this first middleware sets the credentials attribute to empty, so\n    // adapters cannot use it directly, thus enforcing a valid value to be parsed in.\n    exports.$Credentials = mw.Middleware(mw.$$Attr('credentials', function(args){\n      // Assign value for later checking\n      credentials = args.credentials\n\n      // Needs to return non-null and not-undefined\n      // in order for value to be (un)set\n      return '';\n    })).and(mw.$$Attr('credentials', function(args){\n        // check credentials for valid options, valid for fetch\n        if(['same-origin', 'include'].indexOf(credentials) > -1 ){\n            return credentials;\n        }\n    }));\n\n}).call(this);\n",";(function () {\n\n  var object = typeof exports != 'undefined' ? exports : this; // #8: web workers\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  function InvalidCharacterError(message) {\n    this.message = message;\n  }\n  InvalidCharacterError.prototype = new Error;\n  InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n  // encoder\n  // [https://gist.github.com/999166] by [https://github.com/nignag]\n  object.btoa || (\n  object.btoa = function (input) {\n    var str = String(input);\n    for (\n      // initialize result and counter\n      var block, charCode, idx = 0, map = chars, output = '';\n      // if the next str index does not exist:\n      //   change the mapping table to \"=\"\n      //   check if d has no fractional digits\n      str.charAt(idx | 0) || (map = '=', idx % 1);\n      // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n      output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n    ) {\n      charCode = str.charCodeAt(idx += 3/4);\n      if (charCode > 0xFF) {\n        throw new InvalidCharacterError(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n      }\n      block = block << 8 | charCode;\n    }\n    return output;\n  });\n\n  // decoder\n  // [https://gist.github.com/1020396] by [https://github.com/atk]\n  object.atob || (\n  object.atob = function (input) {\n    var str = String(input).replace(/=+$/, '');\n    if (str.length % 4 == 1) {\n      throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      buffer = str.charAt(idx++);\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  });\n\n}());\n","(function() {\n    var utils = require(\"../utils\");\n\n    exports.Http = function(cfg, adapter){\n        return function(args){\n            if(args.debug){\n                console.log(\"\\nDEBUG (request):\", args.method, args.url, args);\n            }\n            var promise = (args.http || adapter.http  || cfg.http)(args);\n            if (args.debug && promise && promise.then){\n                promise.then(function(x){ console.log(\"\\nDEBUG: (responce)\", x);});\n            }\n            return promise;\n        };\n    };\n\n    var toJson = function(x){\n        return (utils.type(x) == 'object') ? JSON.stringify(x) : x;\n    };\n\n    exports.$JsonData = function(h){\n        return function(args){\n            var data = args.bundle || args.data || args.resource;\n            if(data){\n                args.data = toJson(data);\n            }\n            return h(args);\n        };\n    };\n\n}).call(this);\n","module.exports = function(h){\n    return function(args){\n        try{\n            return h(args);\n        }catch(e){\n            if(args.debug){\n               console.log(\"\\nDEBUG: (ERROR in middleware)\");\n               console.log(e.message);\n               console.log(e.stack);\n            }\n            if(!args.defer) {\n                console.log(\"\\nDEBUG: (ERROR in middleware)\");\n                console.log(e.message);\n                console.log(e.stack);\n                throw new Error(\"I need adapter.defer\");\n            }\n            var deff = args.defer();\n            deff.reject(e);\n            return deff.promise;\n        }\n    };\n};\n","(function() {\n    var copyAttr = function(from, to, attr){\n        var v =  from[attr];\n        if(v && !to[attr]) {to[attr] = v;}\n        return from;\n    };\n\n    module.exports = function(cfg, adapter){\n        return function(h){\n            return function(args){\n                copyAttr(cfg, args, 'baseUrl');\n                copyAttr(cfg, args, 'cache');\n                copyAttr(cfg, args, 'auth');\n                copyAttr(cfg, args, 'patient');\n                copyAttr(cfg, args, 'debug');\n                copyAttr(cfg, args, 'credentials');\n                copyAttr(cfg, args, 'headers');\n                copyAttr(cfg, args, 'agentOptions');\n                copyAttr(adapter, args, 'defer');\n                copyAttr(adapter, args, 'http');\n                return h(args);\n            };\n        };\n    };\n}).call(this);\n","exports.$$BundleLinkUrl =  function(rel){\n    return function(h) {\n        return function(args){\n            var matched = function(x){return x.relation && x.relation === rel;};\n            var res =  args.bundle && (args.bundle.link || []).filter(matched)[0];\n            if(res && res.url){\n                args.url = res.url;\n                args.data = null;\n                return h(args);\n            }\n            else{\n                throw new Error(\"No \" + rel + \" link found in bundle\");\n            }\n        };\n    };\n};\n","(function() {\n    var mw = require('./core');\n\n    // List of resources with 'patient' or 'subject' properties (as of FHIR DSTU2 1.0.0)\n    var targets = [\n        \"Account\",\n        \"AllergyIntolerance\",\n        \"BodySite\",\n        \"CarePlan\",\n        \"Claim\",\n        \"ClinicalImpression\",\n        \"Communication\",\n        \"CommunicationRequest\",\n        \"Composition\",\n        \"Condition\",\n        \"Contract\",\n        \"DetectedIssue\",\n        \"Device\",\n        \"DeviceUseRequest\",\n        \"DeviceUseStatement\",\n        \"DiagnosticOrder\",\n        \"DiagnosticReport\",\n        \"DocumentManifest\",\n        \"DocumentReference\",\n        \"Encounter\",\n        \"EnrollmentRequest\",\n        \"EpisodeOfCare\",\n        \"FamilyMemberHistory\",\n        \"Flag\",\n        \"Goal\",\n        \"ImagingObjectSelection\",\n        \"ImagingStudy\",\n        \"Immunization\",\n        \"ImmunizationRecommendation\",\n        \"List\",\n        \"Media\",\n        \"MedicationAdministration\",\n        \"MedicationDispense\",\n        \"MedicationOrder\",\n        \"MedicationStatement\",\n        \"NutritionOrder\",\n        \"Observation\",\n        \"Order\",\n        \"Procedure\",\n        \"ProcedureRequest\",\n        \"QuestionnaireResponse\",\n        \"ReferralRequest\",\n        \"RelatedPerson\",\n        \"RiskAssessment\",\n        \"Specimen\",\n        \"SupplyDelivery\",\n        \"SupplyRequest\",\n        \"VisionPrescription\"\n    ];\n\n    exports.$WithPatient = mw.$$Simple(function(args){\n        var type = args.type;\n        if (args.patient) {\n            if (type === \"Patient\") {\n                args.query = args.query || {};\n                args.query[\"_id\"] = args.patient;\n                args[\"id\"] = args.patient;\n            } else if (targets.indexOf(type) >= 0){\n                args.query = args.query || {};\n                args.query[\"patient\"] = args.patient;\n            }\n        }\n        return args;\n    });\n}).call(this);\n","(function() {\n    var utils = require('../utils');\n\n    var CONTAINED = /^#(.*)/;\n    var resolveContained = function(ref, resource) {\n        var cid = ref.match(CONTAINED)[1];\n        var ret = (resource.contained || []).filter(function(r){\n            return (r.id || r._id) == cid;\n        })[0];\n        return (ret && {content: ret}) || null;\n    };\n\n    var sync = function(arg) {\n        var cache = arg.cache;\n        var reference = arg.reference;\n        var bundle = arg.bundle;\n        var ref = reference;\n        if (!ref.reference) {return null;}\n        if (ref.reference.match(CONTAINED)) {return resolveContained(ref.reference, arg.resource);}\n        var abs = utils.absoluteUrl(arg.baseUrl, ref.reference);\n        var bundled = ((bundle && bundle.entry) || []).filter( function(e){\n            return e.id === abs;\n        })[0];\n        return bundled || (cache != null ? cache[abs] : void 0) || null;\n    };\n\n    var resolve = function(h){\n        return function(args) {\n            var cacheMatched = sync(args);\n            var ref = args.reference;\n            var def = args.defer();\n            if (cacheMatched) {\n                if(!args.defer){ throw new Error(\"I need promise constructor 'adapter.defer' in adapter\"); }\n                def.resolve(cacheMatched);\n                return def.promise;\n            }\n            if (!ref) {\n                throw new Error(\"No reference found\");\n            }\n            if (ref && ref.reference.match(CONTAINED)) {\n                throw new Error(\"Contained resource not found\");\n            }\n            args.url = utils.absoluteUrl(args.baseUrl, ref.reference);\n            args.data = null;\n            return h(args);\n        };\n    };\n\n    module.exports.sync = sync;\n    module.exports.resolve = resolve;\n\n}).call(this);\n","(function() {\n    var utils = require(\"../utils\");\n    var core = require(\"./core\");\n\n    var id = function(x){return x;};\n    var constantly = function(x){return function(){return x;};};\n\n    var get_in = function(obj, path){\n        return path.split('.').reduce(function(acc,x){\n            if(acc == null || acc == undefined) { return null; }\n            return acc[x];\n        }, obj);\n    };\n\n    var evalPropsExpr = function(exp, args){\n        var exps =  exp.split('||').map(function(x){return x.trim().substring(1);});\n        for(var i = 0; i < exps.length; i++){\n            var res = get_in(args, exps[i]);\n            if(res){ return res; }\n        }\n        return null;\n    };\n\n    var evalExpr = function(exp, args){\n        if (exp.indexOf(\":\") == 0){\n            return evalPropsExpr(exp, args);\n        } else {\n            return exp;\n        }\n    };\n\n    var buildPathPart = function(pth, args){\n        var k = evalExpr(pth.trim(), args);\n        if(k==null || k === undefined){ throw new Error(\"Parameter \"+pth+\" is required: \" + JSON.stringify(args)); }\n        return k;\n    };\n\n    // path chaining function\n    // which return haldler wrapper: (h, cfg)->(args -> promise)\n    // it's chainable Path(\"baseUrl\").slash(\":type\").slash(\":id\").slash(\"_history\")(id, {})({id: 5, type: 'Patient'})\n    // and composable p0 = Path(\"baseUrl); p1 = p0.slash(\"path)\n    var Path = function(tkn, chain){\n        //Chainable\n        var new_chain = function(args){\n            return ((chain && (chain(args) + \"/\")) || \"\") +  buildPathPart(tkn, args);\n        };\n        var ch = core.Attribute('url', new_chain);\n        ch.slash = function(tkn){\n            return Path(tkn, new_chain);\n        };\n        return ch;\n    };\n\n    exports.Path = Path;\n}).call(this);\n","(function() {\r\n    var fhirAPI;\r\n    var adapter;\r\n\r\n    function getNext (bundle, process) {\r\n        var i;\r\n        var d = bundle.data.entry || [];\r\n        var entries = [];\r\n        for (i = 0; i < d.length; i++) {\r\n            entries.push(d[i].resource);\r\n        }\r\n        process(entries);\r\n        var def = adapter.defer();\r\n        fhirAPI.nextPage({bundle:bundle.data}).then(function (r) {\r\n            getNext(r, process).then(function (t) {\r\n                def.resolve();\r\n            });\r\n        }, function(err) {def.resolve()});\r\n        return def.promise;\r\n    }\r\n    \r\n    function drain (searchParams, process, done, fail) {\r\n        var ret = adapter.defer();\r\n        \r\n        fhirAPI.search(searchParams).then(function(data){\r\n            getNext(data, process).then(function() {\r\n                done();\r\n            }, function(err) {\r\n                fail(err);\r\n            });\r\n        }, function(err) {\r\n            fail(err);\r\n        });\r\n    };\r\n    \r\n    function fetchAll (searchParams){\r\n        var ret = adapter.defer();\r\n        var results = [];\r\n        \r\n        drain(\r\n            searchParams,\r\n            function(entries) {\r\n                entries.forEach(function(entry) {\r\n                    results.push(entry);\r\n                });\r\n            },\r\n            function () {\r\n                ret.resolve(results);\r\n            },\r\n            function (err) {\r\n                ret.reject(err);\r\n            }\r\n        );\r\n          \r\n        return ret.promise;\r\n    };\r\n\r\n    function fetchAllWithReferences (searchParams, resolveParams) {\r\n        var ret = adapter.defer();\r\n          \r\n        fhirAPI.search(searchParams)  // TODO: THIS IS NOT CORRECT (need fetchAll, but it does not return a bundle yet)\r\n            .then(function(results){\r\n\r\n                var resolvedReferences = {};\r\n\r\n                var queue = [function() {ret.resolve(results, resolvedReferences);}];\r\n                \r\n                function enqueue (bundle,resource,reference) {\r\n                  queue.push(function() {resolveReference(bundle,resource,reference)});\r\n                }\r\n\r\n                function next() {\r\n                  (queue.pop())();\r\n                }\r\n\r\n                function resolveReference (bundle,resource,reference) {\r\n                    var referenceID = reference.reference;\r\n                    fhirAPI.resolve({'bundle': bundle, 'resource': resource, 'reference':reference}).then(function(res){\r\n                      var referencedObject = res.data || res.content;\r\n                      resolvedReferences[referenceID] = referencedObject;\r\n                      next();\r\n                    });\r\n                }\r\n\r\n                var bundle = results.data;\r\n\r\n                bundle.entry && bundle.entry.forEach(function(element){\r\n                  var resource = element.resource;\r\n                  var type = resource.resourceType;\r\n                  resolveParams && resolveParams.forEach(function(resolveParam){\r\n                    var param = resolveParam.split('.');\r\n                    var targetType = param[0];\r\n                    var targetElement = param[1];\r\n                    var reference = resource[targetElement];\r\n                    if (type === targetType && reference) {\r\n                      var referenceID = reference.reference;\r\n                      if (!resolvedReferences[referenceID]) {\r\n                        enqueue(bundle,resource,reference);\r\n                      }\r\n                    }\r\n                  });\r\n                });\r\n\r\n                next();\r\n\r\n            }, function(){\r\n                ret.reject(\"Could not fetch search results\");\r\n            });\r\n          \r\n        return ret.promise;\r\n    };\r\n    \r\n    function decorate (client, newAdapter) {\r\n        fhirAPI = client;\r\n        adapter = newAdapter;\r\n        client[\"drain\"] = drain;\r\n        client[\"fetchAll\"] = fetchAll;\r\n        client[\"fetchAllWithReferences\"] = fetchAllWithReferences;\r\n        return client;\r\n    }\r\n    \r\n    module.exports = decorate;\r\n}).call(this);","export function setPublicPath(systemjsModuleName, rootDirectoryLevel = 1) {\n  if (\n    typeof systemjsModuleName !== \"string\" ||\n    systemjsModuleName.trim().length === 0\n  ) {\n    throw Error(\n      \"systemjs-webpack-interop: setPublicPath(systemjsModuleName) must be called with a non-empty string 'systemjsModuleName'\"\n    );\n  }\n\n  if (\n    typeof rootDirectoryLevel !== \"number\" ||\n    rootDirectoryLevel <= 0 ||\n    !Number.isInteger(rootDirectoryLevel)\n  ) {\n    throw Error(\n      \"systemjs-webpack-interop: setPublicPath(systemjsModuleName, rootDirectoryLevel) must be called with a positive integer 'rootDirectoryLevel'\"\n    );\n  }\n\n  let moduleUrl;\n  try {\n    moduleUrl = window.System.resolve(systemjsModuleName);\n    if (!moduleUrl) {\n      throw Error();\n    }\n  } catch (err) {\n    throw Error(\n      \"systemjs-webpack-interop: There is no such module '\" +\n        systemjsModuleName +\n        \"' in the SystemJS registry. Did you misspell the name of your module?\"\n    );\n  }\n\n  __webpack_public_path__ = resolveDirectory(moduleUrl, rootDirectoryLevel);\n}\n\nfunction resolveDirectory(urlString, rootDirectoryLevel) {\n  const url = new URL(urlString);\n  const pathname = new URL(urlString).pathname;\n  let numDirsProcessed = 0,\n    index = pathname.length;\n  while (numDirsProcessed !== rootDirectoryLevel && index >= 0) {\n    const char = pathname[--index];\n    if (char === \"/\") {\n      numDirsProcessed++;\n    }\n  }\n\n  if (numDirsProcessed !== rootDirectoryLevel) {\n    throw Error(\n      \"systemjs-webpack-interop: rootDirectoryLevel (\" +\n        rootDirectoryLevel +\n        \") is greater than the number of directories (\" +\n        numDirsProcessed +\n        \") in the URL path \" +\n        fullUrl\n    );\n  }\n\n  url.pathname = url.pathname.slice(0, index + 1);\n\n  return url.href;\n}\n","import { setPublicPath } from \"systemjs-webpack-interop\";\n\nsetPublicPath(\"@openmrs/esm-api\");\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","import isPlainObject from \"lodash-es/isPlainObject\";\nimport { Observable } from \"rxjs\";\n\nexport function openmrsFetch(\n  url: string,\n  fetchInit: FetchConfig = {}\n): Promise<FetchResponse> {\n  if (typeof url !== \"string\") {\n    throw Error(\n      \"The first argument to @openmrs/api's openmrsFetch function must be a url string\"\n    );\n  }\n\n  if (typeof fetchInit !== \"object\") {\n    throw Error(\n      \"The second argument to @openmrs/api's openmrsFetch function must be a plain object.\"\n    );\n  }\n\n  // @ts-ignore\n  if (!window.openmrsBase) {\n    throw Error(\n      \"@openmrs/api is running in a browser that doesn't have window.openmrsBase, which is provided by openmrs-module-spa's HTML file.\"\n    );\n  }\n\n  // Prefix the url with the openmrs spa base\n  // @ts-ignore\n  url = window.openmrsBase + url;\n\n  // We're going to need some headers\n  if (!fetchInit.headers) {\n    fetchInit.headers = {};\n  }\n\n  /* Automatically stringify javascript objects being sent in the\n   * request body.\n   */\n  if (isPlainObject(fetchInit.body)) {\n    fetchInit.body = JSON.stringify(fetchInit.body);\n  }\n\n  /* Add a request header to tell the server to respond with json,\n   * since frontend code almost always wants json and the OpenMRS\n   * server won't give you json unless you explicitly ask for it.\n   * If a different Accept header is preferred, pass it into the fetchInit.\n   * If no Accept header is desired, pass it in explicitly as null.\n   */\n  if (typeof fetchInit.headers.Accept === \"undefined\") {\n    fetchInit.headers.Accept = \"application/json\";\n  }\n\n  if (fetchInit.headers.Accept === null) {\n    delete fetchInit.headers.Accept;\n  }\n\n  /* We capture the stacktrace before making the request, so that if an error occurs we can\n   * log a full stacktrace that includes the code that made the request and handled the response\n   * Otherwise, we could run into situations where the stacktrace doesn't even show which code\n   * called @openmrs/api.\n   */\n  const requestStacktrace = Error();\n\n  return window.fetch(url, fetchInit as RequestInit).then(r => {\n    const response = r as FetchResponse;\n    if (response.ok) {\n      if (response.status === 204) {\n        /* HTTP 204 - No Content\n         * We should not try to download the empty response as json. Instead,\n         * we return null since there is no response body.\n         */\n        response.data = null;\n        return response;\n      } else {\n        // HTTP 200s - The request succeeded\n        return response.json().then(data => {\n          response.data = data;\n          return response;\n        });\n      }\n    } else {\n      /* HTTP response status is not in 200s. Usually this will mean\n       * either HTTP 400s (bad request from browser) or HTTP 500s (server error)\n       * Our goal is to come up with best possible stacktrace and error message\n       * to help developers understand the problem and debug\n       */\n\n      // Attempt to download a response body, if it has one\n      return response.text().then(\n        responseText => {\n          let responseBody = responseText;\n          try {\n            responseBody = JSON.parse(responseText);\n          } catch (err) {\n            // Server didn't respond with json, so just go with the response text string\n          }\n\n          /* Make the fetch promise go into \"rejected\" status, with the best\n           * possible stacktrace and error message.\n           */\n          throw new OpenmrsFetchError(\n            url,\n            response,\n            responseBody,\n            requestStacktrace\n          );\n        },\n        err => {\n          /* We weren't able to download a response body for this error.\n           * Time to just give the best possible stacktrace and error message.\n           */\n          throw new OpenmrsFetchError(url, response, null, requestStacktrace);\n        }\n      );\n    }\n  });\n}\n\nexport function openmrsObservableFetch(\n  url: string,\n  fetchInit: FetchConfig = {}\n) {\n  if (typeof fetchInit !== \"object\") {\n    throw Error(\n      \"The second argument to openmrsObservableFetch must be either omitted or an object\"\n    );\n  }\n\n  const abortController = new AbortController();\n\n  fetchInit.signal = abortController.signal;\n\n  return new Observable<FetchResponse>(observer => {\n    let hasResponse = false;\n\n    openmrsFetch(url, fetchInit).then(\n      response => {\n        hasResponse = true;\n        observer.next(response);\n        observer.complete();\n      },\n      err => {\n        hasResponse = true;\n        observer.error(err);\n      }\n    );\n\n    return () => {\n      if (!hasResponse) {\n        abortController.abort();\n      }\n    };\n  });\n}\n\nexport class OpenmrsFetchError extends Error {\n  constructor(\n    url: string,\n    response: Response,\n    responseBody: ResponseBody | null,\n    requestStacktrace: Error\n  ) {\n    super();\n    this.message = `Server responded with ${response.status} (${response.statusText}) for url ${url}. Check err.responseBody or network tab in dev tools for more info`;\n    requestStacktrace.message = this.message;\n    this.responseBody = responseBody;\n    this.response = response;\n    this.stack = `Stacktrace for outgoing request:\\n${requestStacktrace.stack}\\nStacktrace for incoming response:\\n${this.stack}`;\n  }\n  response: Response;\n  responseBody: string | FetchResponseJson | null;\n}\n\nexport interface FetchResponse extends Response {\n  data: any | null;\n}\n\ninterface FetchConfig extends Omit<Omit<RequestInit, \"body\">, \"headers\"> {\n  headers?: FetchHeaders;\n  body?: FetchBody | string;\n}\n\ntype ResponseBody = string | FetchResponseJson;\n\nexport interface FetchHeaders {\n  [key: string]: string | null;\n}\n\ninterface FetchBody {\n  [key: string]: any;\n}\n\ninterface FetchResponseJson {\n  [key: string]: any;\n}\n","import makeFhir from \"fhir.js/src/fhir.js\";\nimport { openmrsFetch, FetchHeaders, OpenmrsFetchError } from \"./openmrs-fetch\";\n\nconst fhirConfig = {\n  baseUrl: `/ws/fhir`\n};\n\nconst openmrsFhirAdapter = {\n  http(requestObj: FHIRRequestObj) {\n    return openmrsFetch(requestObj.url, {\n      method: requestObj.method,\n      headers: requestObj.headers\n    }).then(\n      response => {\n        return {\n          status: response.status,\n          headers: response.headers,\n          data: response.data,\n          config: requestObj\n        };\n      },\n      (err: OpenmrsFetchError) => {\n        return {\n          status: err.response.status,\n          headers: err.response.headers,\n          data: err.responseBody,\n          config: requestObj\n        };\n      }\n    );\n  }\n};\n\nexport const fhir = makeFhir(fhirConfig, openmrsFhirAdapter);\n\ntype FHIRRequestObj = {\n  url: string;\n  method: string;\n  headers: FetchHeaders;\n};\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nvar BehaviorSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        subscribeToResult(this, ish, value, index, innerSubscriber);\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, destination) {\n    if (destination === void 0) {\n        destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (destination.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(destination);\n    }\n    return subscribeTo(result)(destination);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","import { BehaviorSubject, Observable } from \"rxjs\";\nimport { openmrsObservableFetch, FetchResponse } from \"../openmrs-fetch\";\nimport { mergeAll, filter, map } from \"rxjs/operators\";\n\nconst userSubject = new BehaviorSubject<Observable<LoggedInUserFetchResponse>>(\n  openmrsObservableFetch(\"/ws/rest/v1/session\") as Observable<\n    LoggedInUserFetchResponse\n  >\n);\n\nexport function getCurrentUser(\n  opts: CurrentUserOptions = {}\n): Observable<LoggedInUser | UnauthenticatedUser> {\n  return userSubject.asObservable().pipe(\n    mergeAll(),\n    map((r: LoggedInUserFetchResponse) =>\n      opts.includeAuthStatus ? r.data : r.data.user\n    ),\n    filter(Boolean)\n  ) as Observable<LoggedInUser | UnauthenticatedUser>;\n}\n\nexport function refetchCurrentUser() {\n  userSubject.next(openmrsObservableFetch(\"/ws/rest/v1/session\"));\n}\n\nexport function userHasAccess(requiredPrivilege, user) {\n  return user.privileges.find(p => requiredPrivilege === p.display);\n}\n\ntype CurrentUserOptions = {\n  includeAuthStatus?: boolean;\n};\n\ninterface LoggedInUser {\n  uuid: string;\n  display: string;\n  username: string;\n  systemId: string;\n  userProperties: any;\n  person: Person;\n  privileges: Privilege[];\n  roles: Role[];\n  retired: boolean;\n  locale: string;\n  allowedLocales: string[];\n  [anythingElse: string]: any;\n}\n\ntype UnauthenticatedUser = {\n  sessionId: string;\n  authenticated: boolean;\n  user?: LoggedInUser;\n};\n\ntype Person = {\n  uuid: string;\n  display: string;\n  links: any[];\n};\n\ntype Privilege = {\n  uuid: string;\n  display: string;\n  links: any[];\n};\n\ntype Role = {\n  uuid: string;\n  display: string;\n  links: any[];\n};\n\ninterface LoggedInUserFetchResponse extends FetchResponse {\n  data: UnauthenticatedUser & {\n    user?: LoggedInUser;\n  };\n}\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","import React from \"react\";\nimport { getCurrentUser, userHasAccess } from \"./current-user\";\n\nexport default function UserHasAccessReact(props) {\n  const [user, setUser] = React.useState(null);\n\n  React.useEffect(() => {\n    const subscription = getCurrentUser({ includeAuthStatus: false }).subscribe(\n      x => {\n        setUser(x);\n      }\n    );\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  if (user) {\n    return userHasAccess(props.privilege, user) !== undefined && props.children;\n  } else {\n    return null;\n  }\n}\n","export const omrsBackendDependencies = {\n  \"webservices.rest\": \"2.24.0\",\n  fhir: \"1.18.0\"\n};\n","import \"./set-public-path\";\nexport { openmrsFetch, openmrsObservableFetch } from \"./openmrs-fetch\";\nexport { fhir } from \"./fhir\";\nexport {\n  getCurrentUser,\n  refetchCurrentUser,\n  userHasAccess\n} from \"./shared-api-objects/current-user\";\n\nexport {\n  default as UserHasAccessReact\n} from \"./shared-api-objects/user-has-access-react.component\";\n\nexport { omrsBackendDependencies } from \"./openmrs-backend-dependencies\";\n"],"sourceRoot":""}